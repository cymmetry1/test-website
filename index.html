<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PrimeX</title>

  <!-- Favicon / Tab icon -->
  <link rel="icon" type="image/x-icon" href="favicon.ico" />
  <link rel="icon" type="image/png" sizes="32x32" href="favicon.png" />
  <link rel="apple-touch-icon" sizes="192x192" href="logo-192.png" />
  <link rel="apple-touch-icon" sizes="512x512" href="logo-512.png" />
  <meta name="theme-color" content="#0b0b0b" />

  <style>
    :root{
      --bg: #050505;
      --glass: rgba(18,18,18,.62);
      --glass-strong: rgba(18,18,18,.78);
      --stroke: rgba(255,255,255,.14);
      --muted: rgba(255,255,255,.68);
      --text: rgba(255,255,255,.92);

      --gold: #f2b400;
      --gold2:#d79b00;

      --blue: #58c7ff;
      --blue2:#2a7bff;

      --shadow: 0 20px 70px rgba(0,0,0,.55);
      --radius: 24px;
      --radius2: 18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: var(--bg);
      color: var(--text);
      overflow-x:hidden;
    }

    /* ===== Background video (default) ===== */
    .bg-wrap{
      position: fixed;
      inset: 0;
      z-index: -3;
      background: #000;
      overflow:hidden;
    }
    video#bgVideo{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      filter: grayscale(1) contrast(1.05) brightness(.55);
      transform: scale(1.02);
    }
    .vignette{
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(242,180,0,.22), transparent 55%),
        radial-gradient(900px 600px at 80% 20%, rgba(255,255,255,.06), transparent 60%),
        radial-gradient(1100px 800px at 50% 80%, rgba(0,0,0,.50), transparent 55%),
        linear-gradient(to bottom, rgba(0,0,0,.35), rgba(0,0,0,.65));
      z-index: -2;
      pointer-events:none;
    }

    /* When we want a blank black background for certain sections OR gate */
    body.blank-bg .bg-wrap{ display:none; }
    body.blank-bg{ background:#000; }

    /* Subdued montage for APP HOME only (active user) */
    body.home-subdued video#bgVideo{
      filter: grayscale(1) contrast(.98) brightness(.40) blur(2px);
      transform: scale(1.035);
    }
    body.home-subdued .vignette{
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(242,180,0,.14), transparent 60%),
        radial-gradient(900px 600px at 80% 20%, rgba(255,255,255,.05), transparent 62%),
        radial-gradient(1100px 800px at 50% 80%, rgba(0,0,0,.60), transparent 55%),
        linear-gradient(to bottom, rgba(0,0,0,.55), rgba(0,0,0,.78));
    }

    /* ===== Gold Dust Canvas Overlay ===== */
    #dustCanvas{
      position: fixed;
      inset: 0;
      z-index: -1; /* above background, below UI */
      pointer-events:none;
      opacity: 0;
      transition: opacity .35s ease;
    }
    body.dust-on #dustCanvas{ opacity: .95; }
    body.dust-rich #dustCanvas{ opacity: 1; }

    /* ===== Header ===== */
    header{
      position: fixed;
      top:0; left:0; right:0;
      z-index: 30;
      padding: 18px 28px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      pointer-events:none;
    }
    .nav-inner{
      width: 100%;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 18px;
      pointer-events:auto;
    }
    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      text-decoration:none;
      color: var(--text);
    }
    .brand img{
      height: 44px;
      width: auto;
      display:block;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,.55));
    }

    nav{
      display:flex;
      align-items:center;
      gap: 14px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    nav a, nav button{
      color: rgba(255,255,255,.88);
      text-decoration:none;
      font-weight: 900;
      font-size: 13px;
      padding: 10px 12px;
      border-radius: 999px;
      transition: background .2s ease, opacity .2s ease, transform .2s ease, border-color .2s ease;
      opacity:.92;
      background: transparent;
      border: 1px solid transparent;
      cursor: pointer;
    }
    nav a:hover, nav button:hover{
      background: rgba(255,255,255,.08);
      opacity:1;
      transform: translateY(-1px);
    }
    nav .active{
      background: rgba(242,180,0,.14);
      border-color: rgba(242,180,0,.28);
      opacity:1;
    }

    /* Public language switch (UI only) */
    .lang{
      position: relative;
      display:flex;
      align-items:center;
      gap: 8px;
      margin-left: 6px;
    }
    .lang-btn{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.90);
      font-weight: 950;
      cursor:pointer;
      transition: transform .16s ease, background .16s ease, border-color .16s ease;
    }
    .lang-btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.10); border-color: rgba(242,180,0,.18); }
    .lang-pill{
      width: 10px; height: 10px;
      border-radius: 999px;
      background: linear-gradient(180deg, var(--gold), var(--gold2));
      box-shadow: 0 0 0 5px rgba(242,180,0,.10);
    }
    .lang-menu{
      position:absolute;
      top: 44px;
      right: 0;
      width: 180px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(12,12,12,.92);
      box-shadow: 0 22px 70px rgba(0,0,0,.60);
      padding: 8px;
      display:none;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .lang-menu.open{ display:block; }
    .lang-item{
      width:100%;
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.90);
      font-weight: 950;
      cursor:pointer;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
      transition: transform .14s ease, background .14s ease, border-color .14s ease;
    }
    .lang-item:hover{ transform: translateY(-1px); background: rgba(255,255,255,.08); border-color: rgba(242,180,0,.16); }
    .lang-tag{
      font-size: 11px;
      font-weight: 980;
      padding: 6px 9px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.35);
      color: rgba(255,255,255,.80);
      white-space:nowrap;
    }

    /* Account avatar (active app only) */
    .acct{
      display:flex;
      align-items:center;
      gap: 10px;
      margin-left: 6px;
      position: relative;
    }
    .avatar-btn{
      width: 38px; height: 38px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      cursor:pointer;
      display:grid;
      place-items:center;
      transition: transform .16s ease, background .16s ease, border-color .16s ease;
      box-shadow: 0 10px 24px rgba(0,0,0,.35);
    }
    .avatar-btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.10); border-color: rgba(242,180,0,.22); }
    .avatar-dot{
      width: 10px; height: 10px;
      border-radius: 999px;
      background: linear-gradient(180deg, var(--gold), var(--gold2));
      box-shadow: 0 0 0 5px rgba(242,180,0,.14);
    }
    .acct-menu{
      position:absolute;
      top: 46px;
      right: 0;
      width: 280px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(12,12,12,.90);
      box-shadow: 0 22px 70px rgba(0,0,0,.60);
      padding: 10px;
      display:none;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .acct-menu.open{ display:block; }
    .acct-row{
      padding: 10px 10px;
      border-radius: 14px;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.10);
      margin-bottom: 8px;
    }
    .acct-row strong{ display:block; font-size: 12px; letter-spacing:.2px; font-weight: 980; }
    .acct-row span{ display:block; margin-top: 4px; font-size: 11px; color: rgba(255,255,255,.68); font-weight: 850; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
    .acct-pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      margin-top: 8px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.35);
      font-size: 11px;
      font-weight: 980;
      color: rgba(255,255,255,.86);
    }
    .acct-actions{
      display:flex;
      gap: 8px;
    }
    .acct-actions button{
      flex:1;
      padding: 10px 10px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.90);
      font-weight: 980;
      cursor:pointer;
      transition: transform .16s ease, background .16s ease, border-color .16s ease;
    }
    .acct-actions button:hover{ transform: translateY(-1px); background: rgba(255,255,255,.10); border-color: rgba(242,180,0,.20); }

    /* Hide header completely in subscription gate (locked/pending) */
    body.gate header{ display:none; }

    /* ===== Layout ===== */
    main{
      min-height: 100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 140px 22px 80px;
    }

    /* Logged-out hero */
    .hero-card{
      width: min(900px, 100%);
      border-radius: var(--radius);
      background: var(--glass);
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      backdrop-filter: blur(3px);
      -webkit-backdrop-filter: blur(3px);
      padding: 42px 36px 40px;
      text-align:center;
      position: relative;
      transition: transform .28s ease, opacity .28s ease, filter .28s ease;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding: 7px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.90);
      font-weight: 980;
      font-size: 12px;
      letter-spacing:.2px;
      margin-bottom: 18px;
    }
    h1{
      margin:0 0 14px;
      font-size: clamp(34px, 5.4vw, 62px);
      line-height: 1.06;
      letter-spacing: -0.8px;
      font-weight: 980;
      color: rgba(255,255,255,.96);
      text-shadow: 0 10px 30px rgba(0,0,0,.55);
    }
    .sub{
      margin: 0 auto 26px;
      max-width: 680px;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.7;
      font-weight: 750;
    }
    .cta{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      background: linear-gradient(180deg, var(--gold), var(--gold2));
      color: #0b0b0b;
      font-weight: 980;
      border: none;
      border-radius: 999px;
      padding: 13px 26px;
      cursor: pointer;
      box-shadow: 0 6px 18px rgba(0,0,0,.45);
      transition: transform .18s ease;
    }
    .cta:hover{ transform: translateY(-1px); }
    .cta:active{ transform: translateY(0px) scale(.99); }

    /* ===== Gate (subscription-only mode) ===== */
    .gate-wrap{
      width: min(1040px, 100%);
      display:none;
      align-items:center;
      justify-content:center;
    }
    body.gate .gate-wrap{ display:flex; }
    body.gate .hero-card{ display:none; }
    body.gate .app-wrap{ display:none; }

    /* Upgraded frame look */
    .gate-card{
      width: min(940px, 100%);
      border-radius: 34px;
      position: relative;
      overflow:hidden;
      padding: 18px;
      background: rgba(8,8,8,.92);
      box-shadow:
        0 40px 130px rgba(0,0,0,.78),
        0 0 0 1px rgba(255,255,255,.08) inset;
    }
    .gate-card::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(1200px 700px at 18% 18%, rgba(242,180,0,.12), transparent 55%),
        radial-gradient(900px 700px at 82% 20%, rgba(88,199,255,.08), transparent 58%),
        radial-gradient(900px 700px at 55% 92%, rgba(42,123,255,.08), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.72));
      pointer-events:none;
      z-index:0;
    }
    .gate-card::after{
      content:"";
      position:absolute; inset: 10px;
      border-radius: 26px;
      border: 1px solid rgba(255,255,255,.10);
      box-shadow:
        0 0 0 1px rgba(242,180,0,.10),
        0 0 40px rgba(242,180,0,.10),
        0 0 60px rgba(88,199,255,.08);
      pointer-events:none;
      z-index:0;
    }

    .gate-inner{
      position:relative;
      z-index:1;
      padding: 18px 20px 18px;
    }
    .gate-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
      margin-bottom: 14px;
    }
    .gate-brand{
      display:flex;
      align-items:center;
      gap: 12px;
      min-width:0;
    }
    .gate-brand img{
      height: 34px;
      width:auto;
      display:block;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.65));
    }
    .gate-title{
      display:flex;
      flex-direction:column;
      gap: 3px;
      min-width:0;
    }
    .gate-title strong{
      font-size: 14px;
      letter-spacing:.2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      font-weight: 980;
    }
    .gate-title span{
      font-size: 11px;
      color: rgba(255,255,255,.72);
      font-weight: 850;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .gate-logout{
      border-radius: 999px;
      padding: 10px 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.90);
      font-weight: 980;
      cursor:pointer;
      transition: transform .16s ease, background .16s ease, border-color .16s ease;
    }
    .gate-logout:hover{ transform: translateY(-1px); background: rgba(255,255,255,.10); border-color: rgba(242,180,0,.18); }

    .plan-grid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap: 14px;
      margin-top: 10px;
    }
    .plan{
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.30);
      padding: 16px 16px;
      position: relative;
      overflow:hidden;
    }
    .plan::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(720px 260px at 20% 10%, rgba(242,180,0,.08), transparent 60%),
        radial-gradient(720px 260px at 80% 10%, rgba(88,199,255,.06), transparent 60%);
      pointer-events:none;
      opacity:.9;
    }
    .plan > *{ position:relative; z-index:1; }

    .plan-head{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 10px;
    }
    .price{
      text-align:right;
      white-space:nowrap;
    }
    .price .amt{
      font-size: 40px;
      letter-spacing: -0.8px;
      font-weight: 990;
      text-shadow: 0 10px 28px rgba(0,0,0,.55);
    }
    .price .dur{
      margin-top: 2px;
      font-size: 12px;
      font-weight: 980;
      color: rgba(255,255,255,.74);
    }
    .plan h2{
      margin:0;
      font-size: 16px;
      font-weight: 990;
      letter-spacing:.2px;
    }
    .plan p{
      margin: 6px 0 0;
      font-size: 12px;
      color: rgba(255,255,255,.72);
      font-weight: 850;
      line-height: 1.45;
    }

    .feat{
      margin-top: 12px;
      display:grid;
      gap: 10px;
    }
    .feat .row{
      display:flex;
      gap: 10px;
      align-items:flex-start;
      font-size: 12px;
      font-weight: 980;
      color: rgba(255,255,255,.92);
    }
    .tick{
      width: 18px; height: 18px;
      border-radius: 999px;
      flex: 0 0 auto;
      display:grid;
      place-items:center;
      color: #0b0b0b;
      background: linear-gradient(180deg, var(--gold), var(--gold2));
      box-shadow: 0 12px 24px rgba(0,0,0,.35);
      margin-top: 1px;
      font-size: 12px;
      font-weight: 990;
    }

    /* Steps preview row */
    .steps{
      margin-top: 12px;
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
    }
    .step{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      padding: 10px 10px;
      text-align:center;
    }
    .step strong{
      display:block;
      font-size: 11px;
      font-weight: 990;
      letter-spacing:.2px;
    }
    .step span{
      display:block;
      margin-top: 6px;
      font-size: 10.5px;
      color: rgba(255,255,255,.68);
      font-weight: 850;
      line-height:1.25;
    }
    .step .dot{
      width: 10px; height: 10px;
      border-radius: 999px;
      margin: 0 auto 8px;
      background: rgba(255,255,255,.22);
      box-shadow: 0 0 0 6px rgba(255,255,255,.05);
    }
    .step.gold .dot{
      background: rgba(242,180,0,.90);
      box-shadow: 0 0 0 6px rgba(242,180,0,.10);
    }

    .warn{
      margin-top: 12px;
      border-radius: 16px;
      border: 1px solid rgba(242,180,0,.22);
      background: rgba(242,180,0,.08);
      padding: 10px 12px;
      color: rgba(255,255,255,.90);
      font-weight: 980;
      font-size: 12px;
      line-height: 1.35;
    }
    .warn span{
      display:block;
      margin-top: 4px;
      font-size: 11px;
      color: rgba(255,255,255,.72);
      font-weight: 850;
    }

    /* CTA upgrade (more visible) */
    .gate-cta{
      margin-top: 14px;
      width:100%;
      border-radius: 999px;
      padding: 14px 16px;
      border: 1px solid rgba(242,180,0,.18);
      background:
        radial-gradient(800px 140px at 50% 20%, rgba(255,255,255,.18), transparent 55%),
        linear-gradient(180deg, var(--gold), var(--gold2));
      color: #0b0b0b;
      font-weight: 990;
      letter-spacing:.2px;
      cursor:pointer;
      box-shadow:
        0 22px 65px rgba(242,180,0,.20),
        0 18px 45px rgba(0,0,0,.55);
      transition: transform .16s ease, filter .16s ease, box-shadow .16s ease;
      position: relative;
      overflow:hidden;
    }
    .gate-cta::after{
      content:"";
      position:absolute;
      top:-40%;
      left:-20%;
      width: 40%;
      height: 180%;
      transform: rotate(18deg);
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.35), transparent);
      opacity:.22;
      animation: shimmer 3.4s ease-in-out infinite;
    }
    @keyframes shimmer{
      0%{ transform: translateX(-40%) rotate(18deg); }
      55%{ transform: translateX(260%) rotate(18deg); }
      100%{ transform: translateX(260%) rotate(18deg); }
    }
    .gate-cta:hover{
      transform: translateY(-1px);
      filter: brightness(1.02);
      box-shadow:
        0 26px 78px rgba(242,180,0,.26),
        0 18px 45px rgba(0,0,0,.55);
    }
    .gate-cta:active{ transform: translateY(0px) scale(.99); }

    .gate-note{
      margin-top: 10px;
      font-size: 11px;
      color: rgba(255,255,255,.70);
      font-weight: 850;
      text-align:center;
      line-height: 1.45;
    }

    /* Dev bypass (testing only) */
    .devline{
      margin-top: 10px;
      text-align:center;
      font-size: 11px;
      color: rgba(255,255,255,.55);
      font-weight: 850;
    }
    .devline button{
      border:none;
      background: transparent;
      color: rgba(88,199,255,.85);
      font-weight: 980;
      cursor:pointer;
      text-decoration: underline;
      text-underline-offset: 3px;
      padding: 0;
    }
    .devline button:hover{ color: rgba(88,199,255,1); }

    .gate-side{
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.30);
      padding: 16px 16px;
      display:flex;
      flex-direction:column;
      gap: 10px;
    }
    .status-badge{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 8px;
      border-radius: 999px;
      padding: 9px 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      font-size: 12px;
      font-weight: 990;
      color: rgba(255,255,255,.90);
      width: fit-content;
    }
    .status-badge .dot{
      width: 8px; height: 8px;
      border-radius: 999px;
      background: rgba(255,255,255,.35);
      box-shadow: 0 0 0 5px rgba(255,255,255,.06);
    }
    .status-badge.active .dot{ background: rgba(88,199,255,.85); box-shadow: 0 0 0 5px rgba(88,199,255,.10); }
    .status-badge.pending .dot{ background: rgba(242,180,0,.90); box-shadow: 0 0 0 5px rgba(242,180,0,.10); }

    .mini{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      padding: 12px 12px;
    }
    .mini strong{
      display:block;
      font-size: 12px;
      font-weight: 990;
      letter-spacing:.2px;
    }
    .mini span{
      display:block;
      margin-top: 6px;
      font-size: 11px;
      color: rgba(255,255,255,.70);
      font-weight: 850;
      line-height: 1.4;
      word-break: break-word;
    }

    /* ===== App (active) ===== */
    .app-wrap{
      width: min(1120px, 100%);
      display:none;
      gap: 18px;
      flex-direction: column;
      align-items: stretch;
    }
    body.active-app .app-wrap{ display:flex; }
    body.active-app .hero-card{ display:none; }
    body.active-app .gate-wrap{ display:none; }

    .card{
      border-radius: var(--radius);
      background: rgba(18,18,18,.62);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 18px 55px rgba(0,0,0,.48);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      padding: 18px;
    }

    .section{ display:none; }
    .section.active{ display:block; }

    /* Dashboard */
    .dash-title{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 14px;
    }
    .dash-title h2{
      margin:0;
      font-size: 16px;
      font-weight: 990;
      letter-spacing:.2px;
    }
    .dash-title p{
      margin: 6px 0 0;
      color: rgba(255,255,255,.68);
      font-size: 12px;
      font-weight: 850;
      line-height: 1.45;
      max-width: 620px;
    }

    .grid4{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
    }
    .qa{
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      padding: 14px 14px;
      cursor:pointer;
      transition: transform .16s ease, background .16s ease, border-color .16s ease;
      min-height: 92px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
    }
    .qa:hover{ transform: translateY(-1px); background: rgba(255,255,255,.06); border-color: rgba(242,180,0,.20); }
    .qa strong{ font-size: 12px; font-weight: 990; letter-spacing:.2px; }
    .qa span{ font-size: 11px; color: rgba(255,255,255,.66); font-weight: 850; line-height: 1.35; }
    .qa .tag{
      margin-top: 10px;
      display:inline-flex;
      align-items:center;
      gap: 8px;
      width: fit-content;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      font-size: 11px;
      font-weight: 990;
      color: rgba(255,255,255,.88);
    }
    .qa .tag.gold{
      background: rgba(242,180,0,.12);
      border-color: rgba(242,180,0,.22);
      color: rgba(255,255,255,.92);
    }

    .modules{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-top: 12px;
    }
    .mod{
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      padding: 16px 16px;
      min-height: 150px;
      position:relative;
      overflow:hidden;
      transition: transform .16s ease, background .16s ease, border-color .16s ease;
    }
    .mod:hover{ transform: translateY(-1px); background: rgba(255,255,255,.06); border-color: rgba(242,180,0,.20); }
    .mod h3{ margin:0; font-size: 13px; font-weight: 990; letter-spacing:.2px; }
    .mod p{ margin: 8px 0 0; font-size: 11px; color: rgba(255,255,255,.66); font-weight: 850; line-height: 1.45; }
    .mod .pillx{
      position:absolute;
      top: 14px;
      right: 14px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.35);
      font-size: 11px;
      font-weight: 990;
      color: rgba(255,255,255,.88);
      display:inline-flex;
      align-items:center;
      gap: 8px;
    }
    .mod.locked{
      cursor:pointer;
      border-color: rgba(255,255,255,.10);
      background: rgba(0,0,0,.22);
    }
    .mod.locked:hover{ border-color: rgba(242,180,0,.22); }
    .mod.locked::after{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 220px at 15% 20%, rgba(242,180,0,.10), transparent 60%),
        radial-gradient(520px 220px at 85% 20%, rgba(88,199,255,.06), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.0), rgba(0,0,0,.0));
      pointer-events:none;
      opacity:.55;
    }
    .mod .cta-mini{
      margin-top: 14px;
      width: fit-content;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(242,180,0,.22);
      background: rgba(242,180,0,.10);
      color: rgba(255,255,255,.92);
      font-weight: 990;
      font-size: 11px;
      cursor:pointer;
    }

    .upcoming{
      margin-top: 12px;
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap: 12px;
    }
    .up-list{
      display:flex;
      flex-direction:column;
      gap: 10px;
    }
    .up-item{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      padding: 12px 12px;
      display:flex;
      justify-content:space-between;
      gap: 12px;
      align-items:flex-start;
    }
    .up-item strong{
      display:block;
      font-size: 12px;
      font-weight: 990;
      letter-spacing:.2px;
      max-width: 420px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .up-item span{
      display:block;
      margin-top: 6px;
      font-size: 11px;
      color: rgba(255,255,255,.66);
      font-weight: 850;
    }
    .up-chip{
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      font-size: 11px;
      font-weight: 990;
      color: rgba(255,255,255,.88);
      white-space:nowrap;
    }
    .up-cta{
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      padding: 16px 16px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap: 12px;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border:none;
      border-radius: 999px;
      padding: 12px 16px;
      font-weight: 980;
      cursor:pointer;
      transition: transform .18s ease, filter .18s ease, background .18s ease;
      box-shadow: 0 10px 26px rgba(0,0,0,.42);
    }
    .btn:active{ transform: scale(.99); }
    .btn-gold{
      background: linear-gradient(180deg, var(--gold), var(--gold2));
      color:#0b0b0b;
    }
    .btn-ghost{
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.90);
      box-shadow:none;
    }

    /* ===== Live Sessions ===== */
    .calendar-wrap{
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(10,10,10,.72);
      overflow:hidden;
    }
    .cal-head{
      padding: 14px 16px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .chips{ display:flex; flex-wrap:wrap; gap:8px; }
    .chip{
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.86);
      font-size: 12px;
      font-weight: 980;
      cursor:pointer;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
    }
    .chip:hover{ transform: translateY(-1px); }
    .chip.active{
      background: rgba(242,180,0,.14);
      border-color: rgba(242,180,0,.28);
    }
    .weekdays{
      display:grid;
      grid-template-columns: repeat(7, 1fr);
      padding: 10px 0;
      background: rgba(0,0,0,.45);
      border-bottom: 1px solid rgba(255,255,255,.08);
      font-size: 12px;
      font-weight: 980;
      color: rgba(255,255,255,.78);
    }
    .weekdays div{ text-align:center; padding: 6px 0; }
    .grid{
      display:grid;
      grid-template-columns: repeat(7, 1fr);
      min-height: 360px;
    }
    .daycol{
      border-right: 1px solid rgba(255,255,255,.06);
      padding: 12px;
      display:flex;
      flex-direction:column;
      gap: 10px;
    }
    .daycol:last-child{ border-right:0; }

    .session-card{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      padding: 12px 12px;
      display:flex;
      justify-content:space-between;
      gap: 10px;
      cursor:pointer;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
      position:relative;
    }
    .session-card:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.08);
      border-color: rgba(242,180,0,.22);
    }
    .sess-left{ display:flex; flex-direction:column; gap: 2px; min-width: 0; }
    .sess-title{
      font-weight: 990;
      font-size: 12px;
      color: rgba(255,255,255,.92);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .sess-meta{
      font-size: 11px;
      color: rgba(255,255,255,.62);
      font-weight: 850;
      display:flex;
      gap: 8px;
      flex-wrap:wrap;
    }
    .lockbadge{
      align-self:center;
      font-size: 11px;
      font-weight: 990;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.35);
      color: rgba(255,255,255,.80);
      white-space:nowrap;
    }

    /* ===== Subscription section (active app) ===== */
    .sub-wrap{ display:flex; justify-content:center; }
    .sub-card{
      width: min(900px, 100%);
      border-radius: 30px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(10,10,10,.92);
      box-shadow: 0 30px 110px rgba(0,0,0,.75);
      padding: 18px;
      position: relative;
      overflow:hidden;
    }
    .sub-card::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(900px 520px at 20% 15%, rgba(242,180,0,.10), transparent 55%),
        radial-gradient(900px 520px at 85% 20%, rgba(255,255,255,.05), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.70));
      pointer-events:none;
    }
    .sub-inner{ position:relative; z-index:1; padding: 20px 22px 18px; }

    /* ===== Modal overlay (shared) ===== */
    .overlay{
      position: fixed;
      inset: 0;
      z-index: 60;
      display: grid;
      place-items: center;
      padding: 22px;
      opacity: 0;
      pointer-events: none;
      transition: opacity .25s ease;
      background: rgba(0,0,0,.38);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
    }
    .modal{
      width: min(740px, 100%);
      border-radius: var(--radius);
      background: rgba(16,16,16,.90);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      transform: translateY(10px) scale(.96);
      opacity: 0;
      transition: transform .25s ease, opacity .25s ease;
      position: relative;
      overflow:hidden;
    }
    .modal-top{
      padding: 18px 20px 0;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .modal-title{ display:flex; flex-direction:column; gap: 2px; }
    .modal-title strong{ font-size: 16px; letter-spacing:.2px; font-weight: 990; }
    .modal-title span{ font-size: 12px; color: rgba(255,255,255,.62); font-weight: 800; }
    .xbtn{
      width: 40px; height: 40px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      cursor: pointer;
      display:grid;
      place-items:center;
      transition: background .18s ease, transform .18s ease;
    }
    .xbtn:hover{ background: rgba(255,255,255,.10); transform: translateY(-1px); }
    .xbtn:active{ transform: translateY(0px); }
    .modal-body{ padding: 16px 20px 22px; }

    .tabs{ display:flex; gap: 8px; padding: 10px 0 14px; }
    .tab{
      flex:1;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.86);
      font-weight: 980;
      cursor:pointer;
      transition: background .18s ease, transform .18s ease, opacity .18s ease;
      opacity:.9;
    }
    .tab.active{
      background: rgba(242,180,0,.16);
      border-color: rgba(242,180,0,.30);
      opacity:1;
    }

    .field{
      display:flex;
      flex-direction:column;
      gap: 8px;
      margin: 10px 0 14px;
    }
    label{
      font-size: 12px;
      color: rgba(255,255,255,.70);
      font-weight: 850;
      letter-spacing:.2px;
    }
    input, textarea{
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.25);
      color: rgba(255,255,255,.92);
      outline:none;
      transition: border-color .18s ease, background .18s ease;
      font-family: inherit;
    }
    textarea{ min-height: 80px; resize: vertical; }
    input:focus, textarea:focus{
      border-color: rgba(242,180,0,.55);
      background: rgba(0,0,0,.35);
    }

    .row{ display:flex; gap: 10px; flex-wrap:wrap; }
    .row > .field{ flex:1; min-width: 200px; }

    .primary{
      width:100%;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border:none;
      border-radius: 999px;
      padding: 12px 18px;
      background: linear-gradient(180deg, var(--gold), var(--gold2));
      color:#0b0b0b;
      font-weight: 990;
      cursor:pointer;
      box-shadow: 0 14px 40px rgba(242,180,0,.18), 0 10px 26px rgba(0,0,0,.42);
      transition: transform .18s ease, filter .18s ease;
    }
    .primary:hover{ transform: translateY(-1px); filter: brightness(1.02); }
    .primary:active{ transform: translateY(0px) scale(.99); }

    .copyline{
      display:flex;
      gap: 10px;
      align-items:center;
      justify-content:space-between;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      font-weight: 980;
      color: rgba(255,255,255,.86);
      overflow:hidden;
    }
    .copyline code{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      color: rgba(255,255,255,.84);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      display:block;
      max-width: 100%;
      opacity:.9;
    }
    .copybtn{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.25);
      color: rgba(255,255,255,.92);
      font-weight: 990;
      padding: 10px 12px;
      cursor:pointer;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
      white-space:nowrap;
      box-shadow: 0 14px 34px rgba(0,0,0,.35);
    }
    .copybtn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.08);
      border-color: rgba(88,199,255,.22);
    }

    body.modal-open .overlay{ opacity: 1; pointer-events: auto; }
    body.modal-open .modal{ opacity: 1; transform: translateY(0px) scale(1); }
    body.modal-open .hero-card{
      opacity: .22;
      transform: translateY(6px) scale(.985);
      filter: blur(2px);
      pointer-events:none;
    }

    .tiny{
      margin-top: 10px;
      font-size: 11px;
      color: rgba(255,255,255,.55);
      line-height: 1.45;
      font-weight: 850;
    }

    @media (max-width: 980px){
      .plan-grid{ grid-template-columns: 1fr; }
      .steps{ grid-template-columns: 1fr 1fr; }
      .upcoming{ grid-template-columns: 1fr; }
      .grid4{ grid-template-columns: 1fr 1fr; }
      .modules{ grid-template-columns: 1fr; }
    }
    @media (max-width: 520px){
      header{ padding: 14px 16px; }
      .brand img{ height: 38px; }
      nav{ gap: 8px; }
      nav a, nav button{ font-size: 13px; padding: 10px 10px; }
      .hero-card{ padding: 34px 18px 30px; }
      .grid{ grid-template-columns: 1fr; }
      .weekdays{ display:none; }
      .daycol{ border-right:0; border-bottom: 1px solid rgba(255,255,255,.06); }
      .price .amt{ font-size: 34px; }
      .grid4{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <!-- Background -->
  <div class="bg-wrap">
    <video id="bgVideo" autoplay muted loop playsinline preload="auto">
      <source src="montage.mp4" type="video/mp4" />
    </video>
    <div class="vignette"></div>
  </div>

  <!-- Gold dust overlay -->
  <canvas id="dustCanvas" aria-hidden="true"></canvas>

  <!-- Header -->
  <header>
    <div class="nav-inner">
      <a class="brand" href="index.html" aria-label="PrimeX Home">
        <img src="primex-full-transparent-clean.png" alt="PrimeX Logo" />
      </a>

      <!-- Visitor nav -->
      <nav aria-label="Primary" id="navVisitor">
        <a href="#trading">Trading</a>
        <a href="#live">Live Sessions</a>
        <a href="#community">Community</a>
        <a href="#about">About</a>

        <!-- Language (UI only) -->
        <div class="lang" id="langWrap">
          <button class="lang-btn" id="langBtn" type="button" aria-label="Language">
            <span class="lang-pill"></span>
            <span id="langLabel">EN</span>
          </button>
          <div class="lang-menu" id="langMenu" role="menu" aria-label="Language menu">
            <button class="lang-item" type="button" data-lang="en">
              <span>English</span><span class="lang-tag">EN</span>
            </button>
            <button class="lang-item" type="button" data-lang="fa">
              <span>فارسی</span><span class="lang-tag">Soon</span>
            </button>
          </div>
        </div>
      </nav>

      <!-- Logged-in nav (active app only) -->
      <nav aria-label="Customer" id="navCustomer" style="display:none;">
        <button class="active" data-section="home" type="button">Home</button>
        <button data-section="liveSessions" type="button">Live Sessions</button>
        <button data-section="subscription" type="button">Subscription</button>
        <button data-section="groupSignals" type="button">Group Signals</button>

        <div class="acct" id="acctWrap" aria-label="Account">
          <button class="avatar-btn" id="avatarBtn" type="button" aria-label="Account menu">
            <span class="avatar-dot"></span>
          </button>
          <div class="acct-menu" id="acctMenu">
            <div class="acct-row">
              <strong>Account</strong>
              <span id="acctEmail">—</span>
              <div class="acct-pill" id="acctSubPill">Subscription: —</div>
              <div class="acct-pill" id="acctBizPill" style="margin-top:8px;">Business: —</div>
            </div>
            <div class="acct-actions">
              <button id="acctLogoutBtn" type="button">Logout</button>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <!-- Main -->
  <main>
    <!-- Logged-out hero -->
    <section class="hero-card" aria-label="PrimeX Hero" id="hero">
      <div class="pill">Beyond Limits</div>
      <h1>Welcome to PrimeX</h1>
      <p class="sub">PrimeX | Trading × Mindset × Business</p>
      <button class="cta" id="joinBtn" type="button">Join Now</button>
    </section>

    <!-- Subscription Gate (locked/pending) -->
    <section class="gate-wrap" id="gate">
      <div class="gate-card" aria-label="PrimeX Access Gate">
        <div class="gate-inner">
          <div class="gate-top">
            <div class="gate-brand">
              <img src="primex-full-transparent-clean.png" alt="PrimeX" />
              <div class="gate-title">
                <strong>PrimeX Access</strong>
                <span id="gateSubline">Activate your membership to enter the platform.</span>
              </div>
            </div>
            <button class="gate-logout" id="gateLogoutBtn" type="button">Logout</button>
          </div>

          <div class="plan-grid">
            <div class="plan">
              <div class="plan-head">
                <div style="min-width:0;">
                  <h2>PrimeX Subscription</h2>
                  <p>Full platform access — live sessions + group signals.</p>
                </div>
                <div class="price">
                  <div class="amt">$499</div>
                  <div class="dur">3 Months</div>
                </div>
              </div>

              <div class="feat">
                <div class="row"><div class="tick">✓</div><div>Live Sessions calendar + educators</div></div>
                <div class="row"><div class="tick">✓</div><div>Group Signals access</div></div>
                <div class="row"><div class="tick">✓</div><div>Forex, Crypto, Futures, Indices, Gold</div></div>
                <div class="row"><div class="tick">✓</div><div>Education + market breakdowns</div></div>
              </div>

              <div class="steps" aria-label="Payment steps preview">
                <div class="step gold">
                  <div class="dot"></div>
                  <strong>Copy</strong><span>Wallet address</span>
                </div>
                <div class="step">
                  <div class="dot"></div>
                  <strong>Send</strong><span>USDT TRC20</span>
                </div>
                <div class="step">
                  <div class="dot"></div>
                  <strong>Upload</strong><span>Proof / Tx hash</span>
                </div>
                <div class="step">
                  <div class="dot"></div>
                  <strong>Submit</strong><span>Verification</span>
                </div>
              </div>

              <div class="warn">
                ⚠️ Send <b>USDT on TRON (TRC20) only</b>.
                <span>Do not send ERC20 / BEP20 — funds may be lost.</span>
              </div>

              <button class="gate-cta" id="gateUnlockBtn" type="button">Unlock Access</button>
              <div class="gate-note" id="gateNote">
                After submitting proof, status becomes <b>Pending</b> — activation within ~24 hours.
              </div>

              <!-- DEV bypass for testing -->
              <div class="devline">
                Testing? <button id="devPreviewBtn" type="button">Dev: Preview Dashboard</button>
              </div>
            </div>

            <div class="gate-side">
              <div class="status-badge" id="gateStatusBadge"><span class="dot"></span><span id="gateStatusText">Status: Not active</span></div>

              <div class="mini">
                <strong>Account</strong>
                <span id="gateEmail">—</span>
              </div>

              <div class="mini">
                <strong>What happens next?</strong>
                <span id="gateExplain">
                  Submit USDT (TRC20) proof → we verify → access activates.
                </span>
              </div>

              <div class="mini">
                <strong>Tip</strong>
                <span>Tx hash is recommended. Auto-renew is a reminder setting only.</span>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- Active App -->
    <section class="app-wrap" id="app">
      <!-- HOME (Dashboard) -->
      <div class="section active" id="section-home">
        <div class="card">
          <div class="dash-title">
            <div>
              <h2>Dashboard</h2>
              <p>Quick access to sessions, signals, and your modules. Everything is built for clarity — no marketing.</p>
            </div>
            <div style="display:flex; flex-direction:column; gap:10px; align-items:flex-end;">
              <div class="acct-pill" id="homeSubPill" style="margin:0;">Subscription: Active</div>
              <div class="acct-pill" id="homeBizPill" style="margin:0;">Business: Not active</div>
            </div>
          </div>

          <div class="grid4">
            <div class="qa" id="qaLive" role="button" tabindex="0" aria-label="Go to Live Sessions">
              <div>
                <strong>Live Sessions</strong>
                <span>Open the calendar and join scheduled sessions.</span>
              </div>
              <div class="tag">Calendar</div>
            </div>

            <div class="qa" id="qaSignals" role="button" tabindex="0" aria-label="Go to Group Signals">
              <div>
                <strong>Group Signals</strong>
                <span>Direct access to the paid signals group.</span>
              </div>
              <div class="tag">Private</div>
            </div>

            <div class="qa" id="qaSub" role="button" tabindex="0" aria-label="Go to Subscription">
              <div>
                <strong>Subscription</strong>
                <span>View plan details and your current status.</span>
              </div>
              <div class="tag gold" id="qaSubTag">Active</div>
            </div>

            <div class="qa" id="qaBusiness" role="button" tabindex="0" aria-label="Business module">
              <div>
                <strong>Business</strong>
                <span>Unlock your personal business dashboard module.</span>
              </div>
              <div class="tag" id="qaBizTag">Locked • $50</div>
            </div>
          </div>

          <div class="modules" style="margin-top:14px;">
            <div class="mod">
              <div class="pillx">Active</div>
              <h3>Trading</h3>
              <p>Access sessions, frameworks, and structured learning. Built for execution.</p>
            </div>

            <div class="mod">
              <div class="pillx">Active</div>
              <h3>Signals</h3>
              <p>Group signals + market direction. Designed for high signal-to-noise.</p>
            </div>

            <div class="mod locked" id="businessModule" role="button" tabindex="0" aria-label="Business Dashboard module">
              <div class="pillx" id="bizPill">Locked • $50</div>
              <h3>Business Dashboard</h3>
              <p>Unlock advanced tools and personal dashboard features (USDT TRC20 — manual verification).</p>
              <button class="cta-mini" id="bizUnlockBtn" type="button">Unlock Business</button>
            </div>
          </div>

          <div class="upcoming">
            <div class="up-cta">
              <div>
                <strong style="font-size:12px; font-weight:990;">Upcoming sessions</strong>
                <div style="margin-top:6px; font-size:11px; color:rgba(255,255,255,.66); font-weight:850; line-height:1.45;">
                  Preview of what’s next. Open Live Sessions for the full schedule.
                </div>
              </div>
              <button class="btn btn-gold" id="viewCalendarBtn" type="button">Open Live Sessions</button>
            </div>

            <div class="up-list" id="upcomingList"></div>
          </div>
        </div>
      </div>

      <!-- LIVE SESSIONS -->
      <div class="section" id="section-liveSessions">
        <div class="card">
          <div style="display:flex; flex-direction:column; gap:6px;">
            <strong style="font-size:14px; font-weight:990;">Live Sessions</strong>
            <span style="font-size:12px; color:rgba(255,255,255,.66); font-weight:850;">
              Upcoming sessions (details visible — joining opens the Zoom link).
            </span>
          </div>

          <div class="calendar-wrap" style="margin-top:12px;">
            <div class="cal-head">
              <div style="display:flex; flex-direction:column; gap:2px;">
                <strong style="font-size:14px;">Schedule</strong>
                <span style="font-size:12px; color:rgba(255,255,255,.55); font-weight:850;">(demo calendar layout)</span>
              </div>
              <div class="chips" id="chips">
                <button class="chip active" data-filter="All" type="button">All</button>
                <button class="chip" data-filter="Forex" type="button">Forex</button>
                <button class="chip" data-filter="Crypto" type="button">Crypto</button>
                <button class="chip" data-filter="Futures" type="button">Futures</button>
                <button class="chip" data-filter="Indices" type="button">Indices</button>
                <button class="chip" data-filter="Gold" type="button">Gold</button>
              </div>
            </div>

            <div class="weekdays">
              <div>Sunday</div><div>Monday</div><div>Tuesday</div><div>Wednesday</div><div>Thursday</div><div>Friday</div><div>Saturday</div>
            </div>

            <div class="grid" id="calendarGrid"></div>
          </div>
        </div>
      </div>

      <!-- SUBSCRIPTION (active app) -->
      <div class="section" id="section-subscription">
        <div class="sub-wrap">
          <div class="sub-card" aria-label="PrimeX Subscription">
            <div class="sub-inner">
              <div class="plan-head">
                <div class="gate-brand" style="gap:12px;">
                  <img src="primex-full-transparent-clean.png" alt="PrimeX" />
                  <div class="gate-title">
                    <strong>PrimeX Subscription</strong>
                    <span>USDT (TRC20) — manual verification</span>
                  </div>
                </div>
                <div class="price">
                  <div class="amt">$499</div>
                  <div class="dur">3 Months</div>
                </div>
              </div>

              <div class="warn">
                ⚠️ Send <b>USDT on TRON (TRC20) only</b>.
                <span>Do not send ERC20 / BEP20 — funds may be lost.</span>
              </div>

              <div class="feat">
                <div class="row"><div class="tick">✓</div><div>Live Sessions calendar access</div></div>
                <div class="row"><div class="tick">✓</div><div>Group Signals access</div></div>
                <div class="row"><div class="tick">✓</div><div>Education + analysis</div></div>
                <div class="row"><div class="tick">✓</div><div>Premium platform access</div></div>
              </div>

              <button class="gate-cta" id="subOpenPaymentBtn" type="button">Open Payment Steps</button>
              <div class="gate-note" id="subStatusLine">Status: Active</div>
            </div>
          </div>
        </div>
      </div>

      <!-- GROUP SIGNALS -->
      <div class="section" id="section-groupSignals">
        <div class="card">
          <div style="display:flex; justify-content:space-between; align-items:flex-start; gap:12px;">
            <div>
              <strong style="font-size:14px; font-weight:990;">Group Signals</strong>
              <div style="margin-top:6px; font-size:12px; color:rgba(255,255,255,.66); font-weight:850; line-height:1.45;">
                Join the paid signals group. No visible invite link.
              </div>
            </div>
            <div class="acct-pill" style="margin:0;">Active</div>
          </div>

          <button class="btn btn-gold" id="joinSignalsBtn" type="button" style="margin-top:14px; width:100%; padding:14px 18px;">
            Join Group Signals
          </button>
          <div class="tiny">Opens the private group link directly (hidden).</div>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal overlay -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-top">
        <div class="modal-title" id="modalTitle">
          <strong id="modeTitle">Create your account</strong>
          <span id="modeSub">Join PrimeX in seconds.</span>
        </div>
        <button class="xbtn" id="closeBtn" type="button" aria-label="Close">✕</button>
      </div>

      <div class="modal-body">
        <!-- AUTH PANEL -->
        <div id="panel-auth">
          <div class="tabs" role="tablist" aria-label="Sign in or sign up">
            <button class="tab active" id="tabSignup" type="button" role="tab" aria-selected="true">Sign up</button>
            <button class="tab" id="tabSignin" type="button" role="tab" aria-selected="false">Sign in</button>
          </div>

          <form id="authForm">
            <div class="field">
              <label for="email">Email</label>
              <input id="email" name="email" type="email" placeholder="you@example.com" required />
            </div>

            <div class="field">
              <label for="password">Password</label>
              <input id="password" name="password" type="password" placeholder="••••••••" minlength="6" required />
            </div>

            <div class="field" id="confirmWrap">
              <label for="confirm">Confirm password</label>
              <input id="confirm" name="confirm" type="password" placeholder="••••••••" minlength="6" required />
            </div>

            <button class="primary" id="submitBtn" type="submit">Create account</button>
          </form>
        </div>

        <!-- PAYMENT PANEL (shared for Subscription + Business) -->
        <div id="panel-pay" style="display:none;">
          <div style="border-radius:22px; border:1px solid rgba(255,255,255,.12); background: rgba(0,0,0,.35); padding: 16px;">
            <div style="display:flex; justify-content:space-between; align-items:flex-start; gap:12px;">
              <div style="display:flex; gap:12px; align-items:center; min-width:0;">
                <img src="primex-full-transparent-clean.png" alt="PrimeX" style="height:28px; width:auto; filter: drop-shadow(0 10px 18px rgba(0,0,0,.65));" />
                <div style="min-width:0;">
                  <div style="font-size:13px; font-weight:990; letter-spacing:.2px;" id="payTitle">PrimeX Subscription</div>
                  <div style="font-size:11px; color:rgba(255,255,255,.66); font-weight:850;" id="paySub">USDT (TRC20) — manual verification</div>
                </div>
              </div>
              <div style="text-align:right; white-space:nowrap;">
                <div style="font-size:30px; font-weight:990; letter-spacing:-.6px;" id="payAmount">$499</div>
                <div style="font-size:11px; color:rgba(255,255,255,.70); font-weight:980;" id="payDur">3 Months</div>
              </div>
            </div>

            <div class="warn" style="margin-top:12px;">
              ⚠️ Send <b>USDT on TRON (TRC20) only</b>.
              <span>Do not send ERC20 / BEP20 — funds may be lost.</span>
            </div>

            <div style="margin-top:12px; font-size:12px; font-weight:990; color:rgba(255,255,255,.92);">
              1. Copy Wallet Address
            </div>

            <div class="copyline" style="margin-top:8px;">
              <div style="min-width:0;">
                <div style="font-size:11px; opacity:.72; font-weight:990; margin-bottom:6px;">TRC20 Wallet Address</div>
                <code id="walletAddr">TRC20_WALLET_ADDRESS_HERE</code>
              </div>
              <button class="copybtn" id="copyWalletBtn" type="button">Copy</button>
            </div>

            <div style="margin-top:10px; font-size:12px; font-weight:990; color:rgba(255,255,255,.92);">
              2. Send USDT (TRC20)
            </div>
            <div style="margin-top:6px; font-size:11px; color:rgba(255,255,255,.62); font-weight:850;" id="payMeta">
              Amount: $499 • Network: TRON
            </div>

            <div style="margin-top:10px; font-size:12px; font-weight:990; color:rgba(255,255,255,.92);">
              3. Upload Payment Proof
            </div>

            <div style="margin-top:10px; padding: 10px 12px; border-radius:16px; border:1px solid rgba(255,255,255,.10); background: rgba(0,0,0,.22);" id="autoRenewWrap">
              <div style="display:flex; align-items:flex-start; gap:10px;">
                <input type="checkbox" id="autoRenew" style="width:18px; height:18px; margin-top:2px;" />
                <div style="display:flex; flex-direction:column; gap:4px;">
                  <label for="autoRenew" style="margin:0; cursor:pointer; font-weight:990; color:rgba(255,255,255,.90);">
                    Auto-renew every 3 months
                  </label>
                  <div style="font-size:11px; color:rgba(255,255,255,.62); font-weight:850; line-height:1.35;">
                    Reminder setting only — PrimeX never accesses your wallet.
                  </div>
                </div>
              </div>
            </div>

            <div class="row" style="margin-top:10px;">
              <div class="field" style="margin:0;">
                <label for="sendingWallet">Your sending wallet (optional)</label>
                <input id="sendingWallet" type="text" placeholder="Your wallet address" />
              </div>
              <div class="field" style="margin:0;">
                <label for="txHash">Tx hash (recommended)</label>
                <input id="txHash" type="text" placeholder="Transaction hash" />
              </div>
            </div>

            <div class="field" style="margin-top:12px;">
              <label for="proof">Upload screenshot proof</label>
              <input id="proof" type="file" accept="image/*" />
            </div>

            <button class="primary" id="submitProofBtn" type="button">Submit Proof</button>

            <div class="tiny" id="paymentTiny" style="margin-top:10px;">
              Pending verification — Activation within ~24 hours.
            </div>
          </div>
        </div>

        <!-- SESSION DETAILS PANEL -->
        <div id="panel-session" style="display:none;">
          <div class="card" style="padding:14px; background: rgba(255,255,255,.06); border-radius: 16px;">
            <div style="display:flex; justify-content:space-between; gap:10px; align-items:flex-start;">
              <div style="min-width:0;">
                <div style="font-weight:990; font-size:14px;" id="sessDetailTitle">Live Session</div>
                <div style="font-size:12px; color:rgba(255,255,255,.62); font-weight:850; margin-top:6px;" id="sessDetailMeta">—</div>
              </div>
              <div class="acct-pill" style="padding:7px 10px; font-size:11px; margin:0;">Unlocked</div>
            </div>
          </div>

          <button class="primary" id="joinLiveBtn" type="button" style="margin-top:12px;">Join Live</button>
          <div class="tiny" id="joinHint" style="margin-top:10px;">
            Click Join Live to open the session.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Dummy anchors -->
  <div id="trading" style="height:1px;"></div>
  <div id="live" style="height:1px;"></div>
  <div id="community" style="height:1px;"></div>
  <div id="about" style="height:1px;"></div>

  <script>
    /* =========================================================
      PrimeX (single-file demo)
      - Auth: sessionStorage px_loggedIn, px_email
      - Subscription: localStorage px_subStatus (none|pending|active), px_autoRenew
      - Business module: localStorage px_businessStatus (none|pending|active)
      - Language UI: localStorage px_lang (en|fa) - Persian coming soon
      - Gate mode (none/pending): subscription ONLY, nav hidden
      - Active app: full nav + avatar menu, dashboard home
      - Gold dust overlay: canvas, toggled per section/state
    ========================================================== */

    /* ===== Basic state (demo) ===== */
    const state = {
      email: sessionStorage.getItem("px_email") || "",
      loggedIn: sessionStorage.getItem("px_loggedIn") === "1",
      subStatus: localStorage.getItem("px_subStatus") || "none",
      subAutoRenew: localStorage.getItem("px_autoRenew") === "1",
      businessStatus: localStorage.getItem("px_businessStatus") || "none",
      lang: localStorage.getItem("px_lang") || "en",
      activeSection: "home",
      filter: "All",
      selectedSessionId: null,
      payMode: "sub" // "sub" | "biz"
    };

    /* ===== Elements ===== */
    const body = document.body;

    const navVisitor = document.getElementById("navVisitor");
    const navCustomer = document.getElementById("navCustomer");

    const heroJoinBtn = document.getElementById("joinBtn");

    // Lang UI
    const langBtn = document.getElementById("langBtn");
    const langMenu = document.getElementById("langMenu");
    const langLabel = document.getElementById("langLabel");

    const gateLogoutBtn = document.getElementById("gateLogoutBtn");
    const gateUnlockBtn = document.getElementById("gateUnlockBtn");
    const devPreviewBtn = document.getElementById("devPreviewBtn");
    const gateEmail = document.getElementById("gateEmail");
    const gateStatusBadge = document.getElementById("gateStatusBadge");
    const gateStatusText = document.getElementById("gateStatusText");
    const gateSubline = document.getElementById("gateSubline");
    const gateNote = document.getElementById("gateNote");
    const gateExplain = document.getElementById("gateExplain");

    // Account / avatar menu (active app only)
    const avatarBtn = document.getElementById("avatarBtn");
    const acctMenu = document.getElementById("acctMenu");
    const acctEmail = document.getElementById("acctEmail");
    const acctSubPill = document.getElementById("acctSubPill");
    const acctBizPill = document.getElementById("acctBizPill");
    const acctLogoutBtn = document.getElementById("acctLogoutBtn");

    // Home pills
    const homeSubPill = document.getElementById("homeSubPill");
    const homeBizPill = document.getElementById("homeBizPill");
    const qaSubTag = document.getElementById("qaSubTag");
    const qaBizTag = document.getElementById("qaBizTag");

    // Dashboard quick actions
    const qaLive = document.getElementById("qaLive");
    const qaSignals = document.getElementById("qaSignals");
    const qaSub = document.getElementById("qaSub");
    const qaBusiness = document.getElementById("qaBusiness");
    const viewCalendarBtn = document.getElementById("viewCalendarBtn");

    // Business module
    const businessModule = document.getElementById("businessModule");
    const bizPill = document.getElementById("bizPill");
    const bizUnlockBtn = document.getElementById("bizUnlockBtn");

    // Subscription section (active app)
    const subOpenPaymentBtn = document.getElementById("subOpenPaymentBtn");
    const subStatusLine = document.getElementById("subStatusLine");

    // Sections
    const upcomingList = document.getElementById("upcomingList");
    const joinSignalsBtn = document.getElementById("joinSignalsBtn");

    // Calendar
    const calendarGrid = document.getElementById("calendarGrid");
    const chips = document.getElementById("chips");

    /* ===== Modal ===== */
    const overlay = document.getElementById("overlay");
    const closeBtn = document.getElementById("closeBtn");
    const modeTitle = document.getElementById("modeTitle");
    const modeSub = document.getElementById("modeSub");

    // Panels
    const panelAuth = document.getElementById("panel-auth");
    const panelPay = document.getElementById("panel-pay");
    const panelSession = document.getElementById("panel-session");

    // Auth
    const tabSignup = document.getElementById("tabSignup");
    const tabSignin = document.getElementById("tabSignin");
    const confirmWrap = document.getElementById("confirmWrap");
    const submitBtn = document.getElementById("submitBtn");
    const authForm = document.getElementById("authForm");

    // Pay panel fields
    const payTitle = document.getElementById("payTitle");
    const paySub = document.getElementById("paySub");
    const payAmount = document.getElementById("payAmount");
    const payDur = document.getElementById("payDur");
    const payMeta = document.getElementById("payMeta");
    const autoRenewWrap = document.getElementById("autoRenewWrap");

    const walletAddr = document.getElementById("walletAddr");
    const copyWalletBtn = document.getElementById("copyWalletBtn");
    const autoRenew = document.getElementById("autoRenew");
    const submitProofBtn = document.getElementById("submitProofBtn");
    const paymentTiny = document.getElementById("paymentTiny");

    // Session panel
    const sessDetailTitle = document.getElementById("sessDetailTitle");
    const sessDetailMeta = document.getElementById("sessDetailMeta");
    const joinLiveBtn = document.getElementById("joinLiveBtn");
    const joinHint = document.getElementById("joinHint");

    /* ===== Gold Dust Canvas ===== */
    const dustCanvas = document.getElementById("dustCanvas");
    const dustCtx = dustCanvas.getContext("2d", { alpha: true });
    let dustW = 0, dustH = 0, dpr = 1;
    let dustParticles = [];
    let dustMode = "off"; // "off" | "light" | "rich"
    let dustRunning = false;
    let rafId = null;

    function resizeDust(){
      dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      dustW = Math.floor(window.innerWidth);
      dustH = Math.floor(window.innerHeight);
      dustCanvas.width = Math.floor(dustW * dpr);
      dustCanvas.height = Math.floor(dustH * dpr);
      dustCanvas.style.width = dustW + "px";
      dustCanvas.style.height = dustH + "px";
      dustCtx.setTransform(dpr,0,0,dpr,0,0);
    }

    function rand(min,max){ return min + Math.random()*(max-min); }

    function makeDust(count){
      const arr = [];
      for(let i=0;i<count;i++){
        arr.push({
          x: rand(0, dustW),
          y: rand(0, dustH),
          r: rand(0.6, 1.8),
          a: rand(0.10, 0.35),
          vx: rand(-0.12, 0.22),
          vy: rand(-0.04, 0.14),
          tw: rand(0.002, 0.012),
          t: rand(0, 1000),
          hue: Math.random() < 0.72 ? rand(38, 52) : rand(195, 210), // gold-ish or soft blue
        });
      }
      return arr;
    }

    function setDustMode(mode){
      dustMode = mode;

      body.classList.toggle("dust-on", mode !== "off");
      body.classList.toggle("dust-rich", mode === "rich");

      if(mode === "off"){
        stopDust();
        return;
      }

      resizeDust();
      const base = mode === "rich" ? 120 : 85;
      const count = Math.min(160, Math.floor(base + (dustW * dustH) / 32000));
      dustParticles = makeDust(count);
      startDust();
    }

    function startDust(){
      if(dustRunning) return;
      dustRunning = true;
      tickDust();
    }

    function stopDust(){
      dustRunning = false;
      if(rafId) cancelAnimationFrame(rafId);
      rafId = null;
      dustCtx.clearRect(0,0,dustW,dustH);
    }

    function tickDust(){
      if(!dustRunning) return;

      dustCtx.clearRect(0,0,dustW,dustH);

      // Soft vignette haze (very subtle)
      dustCtx.globalCompositeOperation = "source-over";
      dustCtx.fillStyle = "rgba(0,0,0,0)";
      // particles
      for(const p of dustParticles){
        p.t += 1;
        p.x += p.vx;
        p.y += p.vy;

        // wrap
        if(p.x < -20) p.x = dustW + 20;
        if(p.x > dustW + 20) p.x = -20;
        if(p.y < -20) p.y = dustH + 20;
        if(p.y > dustH + 20) p.y = -20;

        const twinkle = 0.55 + 0.45*Math.sin(p.t * p.tw);
        const alpha = (dustMode === "rich" ? (p.a + 0.06) : p.a) * twinkle;

        // glow dot
        dustCtx.beginPath();
        dustCtx.fillStyle = `hsla(${p.hue}, 95%, 60%, ${alpha})`;
        dustCtx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        dustCtx.fill();

        // micro glow bloom
        if(dustMode === "rich" && Math.random() < 0.012){
          dustCtx.beginPath();
          dustCtx.fillStyle = `hsla(${p.hue}, 95%, 70%, ${alpha * 0.55})`;
          dustCtx.arc(p.x, p.y, p.r * 3.3, 0, Math.PI*2);
          dustCtx.fill();
        }
      }

      // occasional very subtle streak
      if(dustMode === "rich" && Math.random() < 0.06){
        const sx = rand(0, dustW);
        const sy = rand(0, dustH);
        const len = rand(80, 180);
        dustCtx.strokeStyle = `rgba(242,180,0,${rand(0.04,0.08)})`;
        dustCtx.lineWidth = 1;
        dustCtx.beginPath();
        dustCtx.moveTo(sx, sy);
        dustCtx.lineTo(sx + len, sy + rand(-12, 12));
        dustCtx.stroke();
      }

      rafId = requestAnimationFrame(tickDust);
    }

    window.addEventListener("resize", () => {
      if(dustMode !== "off") resizeDust();
    });
    document.addEventListener("visibilitychange", () => {
      if(document.hidden) stopDust();
      else if(dustMode !== "off") startDust();
    });

    /* ===== Demo sessions ===== */
    const sessions = [
      { id:"s1", dayIndex:0, time:"3:15 PM", title:"Execution & Structure", host:"PrimeX", category:"Forex", joinUrl:"https://zoom.us/" },
      { id:"s2", dayIndex:1, time:"3:00 AM", title:"Risk Management", host:"PrimeX", category:"Indices", joinUrl:"https://zoom.us/" },
      { id:"s3", dayIndex:2, time:"3:00 AM", title:"Mindset Under Pressure", host:"PrimeX", category:"Crypto", joinUrl:"https://zoom.us/" },
      { id:"s4", dayIndex:4, time:"8:00 AM", title:"Market Prep Live", host:"PrimeX", category:"Gold", joinUrl:"https://zoom.us/" },
      { id:"s5", dayIndex:5, time:"4:00 PM", title:"Trading Review", host:"PrimeX", category:"Futures", joinUrl:"https://zoom.us/" },
    ];

    /* ===== Helpers ===== */
    function isSubActive(){ return state.subStatus === "active"; }
    function isBizActive(){ return state.businessStatus === "active"; }

    function subLabel(){
      return state.subStatus === "active" ? "Active" : state.subStatus === "pending" ? "Pending" : "Not active";
    }
    function bizLabel(){
      return state.businessStatus === "active" ? "Active" : state.businessStatus === "pending" ? "Pending" : "Not active";
    }

    function showVisitorNav(){
      navVisitor.style.display = "flex";
      navCustomer.style.display = "none";
    }
    function showCustomerNav(){
      navVisitor.style.display = "none";
      navCustomer.style.display = "flex";
    }

    function setActiveNavButton(section){
      [...navCustomer.querySelectorAll("button[data-section]")].forEach(btn=>{
        btn.classList.toggle("active", btn.dataset.section === section);
      });
    }

    function applyDustForState(){
      // Per your rules:
      // Landing: ON (light)
      // Gate (subscription lock): ON (rich) but black background stays
      // Active app Home: ON (light subtle)
      // Active app Live Sessions: OFF (blank)
      // Active app Subscription: OFF (blank)
      // Active app Group Signals: OFF (blank)
      if(!state.loggedIn){
        setDustMode("light");
        return;
      }
      if(!isSubActive()){
        setDustMode("rich");
        return;
      }
      // active app:
      if(state.activeSection === "home"){
        setDustMode("light");
      } else {
        setDustMode("off");
      }
    }

    function showSection(section){
      state.activeSection = section;

      document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
      const el = document.getElementById(`section-${section}`);
      if(el) el.classList.add("active");

      setActiveNavButton(section);

      // Background rules for ACTIVE app:
      // - Home: subdued montage
      // - Live Sessions, Subscription, Group Signals: black
      const needsBlank = (section === "liveSessions" || section === "subscription" || section === "groupSignals");
      body.classList.toggle("blank-bg", needsBlank);
      body.classList.toggle("home-subdued", !needsBlank && section === "home");

      applyDustForState();
    }

    function setPills(){
      // Account menu
      acctEmail.textContent = state.email || "—";
      acctSubPill.textContent = `Subscription: ${subLabel()}`;
      acctBizPill.textContent = `Business: ${bizLabel()}`;

      // Home pills
      homeSubPill.textContent = `Subscription: ${subLabel()}`;
      homeBizPill.textContent = `Business: ${bizLabel()}`;

      // Quick action tags
      qaSubTag.textContent = subLabel();
      qaBizTag.textContent = (state.businessStatus === "active")
        ? "Active"
        : (state.businessStatus === "pending" ? "Pending • $50" : "Locked • $50");

      // Business module pill
      bizPill.textContent = (state.businessStatus === "active")
        ? "Active"
        : (state.businessStatus === "pending" ? "Pending • $50" : "Locked • $50");

      // Subscription page line
      subStatusLine.textContent = `Status: ${subLabel()}`;
    }

    function setGateUI(){
      gateEmail.textContent = state.email || "—";

      gateStatusBadge.classList.remove("pending","active");
      if(state.subStatus === "pending") gateStatusBadge.classList.add("pending");
      if(state.subStatus === "active") gateStatusBadge.classList.add("active");

      gateStatusText.textContent = `Status: ${subLabel()}`;

      if(state.subStatus === "pending"){
        gateSubline.textContent = "Verification in progress. You'll enter the platform after activation.";
        gateNote.innerHTML = "Submitted ✅ <b>Pending verification</b> — activation within ~24 hours.";
        gateExplain.textContent = "You're all set. We verify your payment and activate access.";
        gateUnlockBtn.textContent = "View Payment Steps";
      } else {
        gateSubline.textContent = "Activate your membership to enter the platform.";
        gateNote.innerHTML = "After submitting proof, status becomes <b>Pending</b> — activation within ~24 hours.";
        gateExplain.textContent = "Submit USDT (TRC20) proof → we verify → access activates.";
        gateUnlockBtn.textContent = "Unlock Access";
      }
    }

    function setModeClasses(){
      body.classList.remove("gate","active-app","blank-bg","home-subdued","dust-on","dust-rich");

      if(!state.loggedIn){
        showVisitorNav();
        body.classList.remove("blank-bg");
        applyDustForState();
        return;
      }

      // Gate if sub not active (none/pending). Active app only if sub active.
      if(!isSubActive()){
        body.classList.add("gate");
        body.classList.add("blank-bg");
        showVisitorNav(); // header hidden in gate anyway
        setGateUI();
        applyDustForState();
        return;
      }

      // Active app
      body.classList.add("active-app");
      showCustomerNav();
      setPills();
      showSection(state.activeSection || "home");
      applyDustForState();
    }

    /* ===== Modal helpers ===== */
    function openModal(){
      body.classList.add("modal-open");
      overlay.setAttribute("aria-hidden","false");
    }
    function closeModal(){
      body.classList.remove("modal-open");
      overlay.setAttribute("aria-hidden","true");
      showModalPanel("auth");
    }

    function showModalPanel(which){
      panelAuth.style.display = "none";
      panelPay.style.display = "none";
      panelSession.style.display = "none";
      if(which === "auth") panelAuth.style.display = "block";
      if(which === "pay") panelPay.style.display = "block";
      if(which === "session") panelSession.style.display = "block";
    }

    function openAuthModal(){
      modeTitle.textContent = "Create your account";
      modeSub.textContent = "Join PrimeX in seconds.";
      showModalPanel("auth");
      openModal();
      setTimeout(()=> document.getElementById("email")?.focus(), 50);
    }

    function openPaymentModal(mode){
      // mode: "sub" | "biz"
      state.payMode = mode;

      const isSub = mode === "sub";
      const amount = isSub ? 499 : 50;
      const dur = isSub ? "3 Months" : "One-time";
      const title = isSub ? "PrimeX Subscription" : "Business Dashboard";
      const sub = isSub ? "USDT (TRC20) — manual verification" : "USDT (TRC20) — module unlock";

      modeTitle.textContent = isSub ? "Unlock access" : "Unlock business";
      modeSub.textContent = "USDT (TRC20) — manual payment.";

      payTitle.textContent = title;
      paySub.textContent = sub;
      payAmount.textContent = `$${amount}`;
      payDur.textContent = dur;
      payMeta.textContent = `Amount: $${amount} • Network: TRON`;

      // Wallet + fields
      walletAddr.textContent = "TRC20_WALLET_ADDRESS_HERE";

      // Auto-renew only for subscription
      autoRenewWrap.style.display = isSub ? "block" : "none";
      if(isSub){
        autoRenew.checked = state.subAutoRenew;
      }

      // Tiny status line
      if(isSub){
        paymentTiny.textContent =
          state.subStatus === "pending"
            ? "Submitted ✅ Pending verification. Estimated activation: ~24 hours."
            : "Pending verification — Activation within ~24 hours.";
      } else {
        paymentTiny.textContent =
          state.businessStatus === "pending"
            ? "Submitted ✅ Pending verification. Estimated activation: ~24 hours."
            : "Pending verification — Activation within ~24 hours.";
      }

      showModalPanel("pay");
      openModal();
    }

    function openSessionDetailsModal(session){
      modeTitle.textContent = "Live session";
      modeSub.textContent = "Details are visible — joining opens the session link.";
      showModalPanel("session");

      state.selectedSessionId = session.id;
      sessDetailTitle.textContent = `Live Session — ${session.title}`;
      sessDetailMeta.textContent = `${session.time} • Host: ${session.host} • ${session.category}`;
      joinHint.textContent = "Click Join Live to open the session.";

      openModal();
    }

    /* overlay events */
    heroJoinBtn.addEventListener("click", openAuthModal);
    closeBtn.addEventListener("click", closeModal);
    overlay.addEventListener("click", (e) => { if(e.target === overlay) closeModal(); });
    window.addEventListener("keydown", (e) => {
      if(e.key === "Escape" && body.classList.contains("modal-open")) closeModal();
    });

    /* ===== Language UI ===== */
    function setLangUI(){
      langLabel.textContent = (state.lang || "en").toUpperCase();
    }
    langBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      langMenu.classList.toggle("open");
    });
    langMenu.addEventListener("click", (e) => {
      const btn = e.target.closest("button[data-lang]");
      if(!btn) return;
      const lang = btn.dataset.lang;
      if(lang === "fa"){
        // UI only for now (per your plan). Keep English active.
        alert("Persian (FA) is coming soon. For now the site stays in English.");
        langMenu.classList.remove("open");
        return;
      }
      state.lang = "en";
      localStorage.setItem("px_lang", "en");
      setLangUI();
      langMenu.classList.remove("open");
    });
    window.addEventListener("click", () => {
      if(langMenu.classList.contains("open")) langMenu.classList.remove("open");
      if(acctMenu && acctMenu.classList.contains("open")) acctMenu.classList.remove("open");
    });

    /* ===== Auth tabs ===== */
    function setAuthMode(mode){
      const isSignup = mode === "signup";
      tabSignup.classList.toggle("active", isSignup);
      tabSignin.classList.toggle("active", !isSignup);
      tabSignup.setAttribute("aria-selected", isSignup ? "true" : "false");
      tabSignin.setAttribute("aria-selected", !isSignup ? "true" : "false");

      confirmWrap.style.display = isSignup ? "flex" : "none";
      document.getElementById("confirm").required = isSignup;

      modeTitle.textContent = isSignup ? "Create your account" : "Welcome back";
      modeSub.textContent = isSignup ? "Join PrimeX in seconds." : "Sign in to continue.";
      submitBtn.textContent = isSignup ? "Create account" : "Sign in";
    }
    tabSignup.addEventListener("click", () => setAuthMode("signup"));
    tabSignin.addEventListener("click", () => setAuthMode("signin"));
    setAuthMode("signup");

    authForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const email = document.getElementById("email").value.trim();
      const pass = document.getElementById("password").value;
      const confirm = document.getElementById("confirm").value;
      const isSignup = tabSignup.classList.contains("active");

      if (!email || !pass) return;

      if (isSignup && pass !== confirm) {
        alert("Passwords do not match.");
        return;
      }

      state.email = email;
      state.loggedIn = true;
      sessionStorage.setItem("px_loggedIn","1");
      sessionStorage.setItem("px_email", email);

      // After auth: if subscription not active -> gate (default), otherwise app
      setModeClasses();

      closeModal();
      authForm.reset();
      setAuthMode("signup");
    });

    /* ===== Logout ===== */
    function doLogout(){
      sessionStorage.removeItem("px_loggedIn");
      sessionStorage.removeItem("px_email");
      state.loggedIn = false;
      state.email = "";
      location.reload();
    }
    gateLogoutBtn.addEventListener("click", doLogout);
    acctLogoutBtn.addEventListener("click", doLogout);

    /* ===== DEV bypass (preview dashboard) ===== */
    devPreviewBtn.addEventListener("click", () => {
      state.subStatus = "active";
      localStorage.setItem("px_subStatus", "active");
      setModeClasses();
    });

    /* ===== Customer nav section switching (active only) ===== */
    navCustomer.addEventListener("click", (e) => {
      const btn = e.target.closest("button[data-section]");
      if(!btn) return;
      showSection(btn.dataset.section);
      if(acctMenu) acctMenu.classList.remove("open");
    });

    /* ===== Avatar menu ===== */
    function toggleAcctMenu(){
      acctMenu.classList.toggle("open");
    }
    avatarBtn?.addEventListener("click", (e) => {
      e.stopPropagation();
      toggleAcctMenu();
    });

    /* ===== Quick actions ===== */
    qaLive.addEventListener("click", ()=> showSection("liveSessions"));
    qaSignals.addEventListener("click", ()=> showSection("groupSignals"));
    qaSub.addEventListener("click", ()=> showSection("subscription"));
    viewCalendarBtn.addEventListener("click", ()=> showSection("liveSessions"));

    qaBusiness.addEventListener("click", ()=> {
      if(isBizActive()) return;
      openPaymentModal("biz");
    });

    bizUnlockBtn.addEventListener("click", (e)=> {
      e.stopPropagation();
      if(isBizActive()) return;
      openPaymentModal("biz");
    });
    businessModule.addEventListener("click", ()=> {
      if(isBizActive()) return;
      openPaymentModal("biz");
    });

    /* ===== Gate actions ===== */
    gateUnlockBtn.addEventListener("click", ()=> openPaymentModal("sub"));

    /* ===== Subscription section (active app) ===== */
    subOpenPaymentBtn.addEventListener("click", ()=> openPaymentModal("sub"));

    /* ===== Copy wallet ===== */
    copyWalletBtn.addEventListener("click", async () => {
      try{
        await navigator.clipboard.writeText(walletAddr.textContent.trim());
        copyWalletBtn.textContent = "Copied";
        setTimeout(()=> copyWalletBtn.textContent = "Copy", 900);
      }catch(err){
        alert("Copy failed. Please copy manually.");
      }
    });

    /* Auto-renew setting (subscription only) */
    autoRenew.addEventListener("change", () => {
      state.subAutoRenew = autoRenew.checked;
      localStorage.setItem("px_autoRenew", state.subAutoRenew ? "1" : "0");
    });

    /* Submit proof (subscription OR business) */
    submitProofBtn.addEventListener("click", () => {
      if(state.payMode === "sub"){
        state.subStatus = "pending";
        localStorage.setItem("px_subStatus", "pending");
        paymentTiny.textContent = "Submitted ✅ Pending verification. Estimated activation: ~24 hours.";

        setGateUI();
        setPills();
        setModeClasses();
        return;
      }

      state.businessStatus = "pending";
      localStorage.setItem("px_businessStatus", "pending");
      paymentTiny.textContent = "Submitted ✅ Pending verification. Estimated activation: ~24 hours.";
      setPills();
    });

    /* ===== Group signals ===== */
    joinSignalsBtn.addEventListener("click", () => {
      window.open("https://t.me/", "_blank", "noopener,noreferrer");
    });

    /* ===== Calendar ===== */
    function buildCalendar(){
      calendarGrid.innerHTML = "";
      for(let d=0; d<7; d++){
        const col = document.createElement("div");
        col.className = "daycol";
        col.dataset.day = String(d);

        const daySessions = sessions
          .filter(s => s.dayIndex === d)
          .filter(s => state.filter === "All" ? true : s.category === state.filter);

        if(daySessions.length === 0){
          const empty = document.createElement("div");
          empty.style.opacity = ".45";
          empty.style.fontSize = "12px";
          empty.style.fontWeight = "980";
          empty.style.color = "rgba(255,255,255,.55)";
          empty.textContent = "—";
          col.appendChild(empty);
        } else {
          daySessions.forEach(s => {
            const card = document.createElement("div");
            card.className = "session-card";
            card.dataset.sessionId = s.id;

            const left = document.createElement("div");
            left.className = "sess-left";

            const title = document.createElement("div");
            title.className = "sess-title";
            title.textContent = s.title;

            const meta = document.createElement("div");
            meta.className = "sess-meta";
            meta.textContent = `${s.time} • ${s.category}`;

            left.appendChild(title);
            left.appendChild(meta);

            const badge = document.createElement("div");
            badge.className = "lockbadge";
            badge.textContent = "Open";

            card.appendChild(left);
            card.appendChild(badge);

            card.addEventListener("click", () => openSessionDetailsModal(s));
            col.appendChild(card);
          });
        }

        calendarGrid.appendChild(col);
      }
    }

    chips.addEventListener("click", (e) => {
      const chip = e.target.closest(".chip");
      if(!chip) return;
      state.filter = chip.dataset.filter;
      chips.querySelectorAll(".chip").forEach(c=> c.classList.toggle("active", c === chip));
      buildCalendar();
    });

    /* Session join (active only) */
    joinLiveBtn.addEventListener("click", () => {
      const session = sessions.find(s => s.id === state.selectedSessionId);
      if(!session) return;
      window.open(session.joinUrl, "_blank", "noopener,noreferrer");
      closeModal();
    });

    /* ===== Upcoming sessions (dashboard) ===== */
    function buildUpcoming(){
      upcomingList.innerHTML = "";
      const preview = sessions.slice(0, 3);
      preview.forEach(s => {
        const item = document.createElement("div");
        item.className = "up-item";

        const left = document.createElement("div");
        left.style.minWidth = "0";

        const t = document.createElement("strong");
        t.textContent = s.title;

        const m = document.createElement("span");
        m.textContent = `${s.time} • ${s.category} • Host: ${s.host}`;

        left.appendChild(t);
        left.appendChild(m);

        const chip = document.createElement("div");
        chip.className = "up-chip";
        chip.textContent = s.category;

        item.appendChild(left);
        item.appendChild(chip);
        upcomingList.appendChild(item);
      });
    }

    /* ===== Init ===== */
    function init(){
      if(!localStorage.getItem("px_subStatus")) localStorage.setItem("px_subStatus", state.subStatus);
      if(!localStorage.getItem("px_businessStatus")) localStorage.setItem("px_businessStatus", state.businessStatus);
      if(!localStorage.getItem("px_lang")) localStorage.setItem("px_lang", state.lang);

      if(state.loggedIn && !state.email){
        state.email = sessionStorage.getItem("px_email") || "";
      }

      setLangUI();
      resizeDust(); // prepare dust canvas early

      setModeClasses();

      buildCalendar();
      buildUpcoming();
      setPills();
      setGateUI();

      if(isSubActive()){
        state.activeSection = "home";
        showSection("home");
      } else {
        // gate defaults
        applyDustForState();
      }
    }
    init();
  </script>
</body>
</html>
