<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PrimeX</title>

  <link rel="icon" type="image/png" href="primex-mark-44-clean.png" />

  <style>
    :root{
      --bg: #050505;
      --glass: rgba(18,18,18,.65);
      --glass2: rgba(12,12,12,.86);
      --stroke: rgba(255,255,255,.12);
      --text: rgba(255,255,255,.94);
      --muted: rgba(255,255,255,.72);
      --gold:#f2b400;
      --gold2:#d79b00;
      --shadow: 0 24px 90px rgba(0,0,0,.65);
      --r1: 28px;
      --r2: 18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: var(--bg);
      color: var(--text);
      overflow-x:hidden;
    }

    /* Background video */
    .bg-wrap{
      position: fixed;
      inset: 0;
      z-index: -3;
      background: #000;
      overflow:hidden;
    }
    video#bgVideo{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      filter: grayscale(1) contrast(1.05) brightness(.55);
      transform: scale(1.02);
    }
    .vignette{
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(242,180,0,.20), transparent 55%),
        linear-gradient(to bottom, rgba(0,0,0,.35), rgba(0,0,0,.72));
      pointer-events:none;
      z-index:-2;
    }

    /* ===== HEADER ===== */
    header{
      position: fixed;
      top:0; left:0; right:0;
      z-index: 30;
      padding: 18px 26px;
    }
    .nav-inner{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 16px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap: 10px;
      text-decoration:none;
      color: var(--text);
    }
    .brand img{ height:44px; filter: drop-shadow(0 10px 20px rgba(0,0,0,.55)); }
    nav{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      align-items:center;
    }
    nav button{
      border:none;
      cursor:pointer;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      color: rgba(255,255,255,.92);
      font-weight: 900;
      transition: transform .16s ease, background .16s ease, border-color .16s ease;
    }
    nav button:hover{ transform: translateY(-1px); background: rgba(255,255,255,.10); border-color: rgba(242,180,0,.18); }
    nav button.active{ background: rgba(242,180,0,.14); border-color: rgba(242,180,0,.26); }

    /* IMPORTANT: hide header entirely while in gate */
    body.gate header{ display:none; }

    /* ===== MAIN LAYOUT ===== */
    main{
      min-height: 100vh;
      display:grid;
      place-items:center;
      padding: 120px 22px 80px;
    }

    /* ===== LANDING (logged out) ===== */
    .hero{
      width: min(920px, 100%);
      border-radius: var(--r1);
      border: 1px solid var(--stroke);
      background: var(--glass);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 40px 34px;
      text-align:center;
      display:none;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 7px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      font-weight: 950;
      font-size: 12px;
      margin-bottom: 16px;
    }
    h1{
      margin:0 0 12px;
      font-size: clamp(34px, 5.4vw, 62px);
      font-weight: 980;
      letter-spacing: -0.8px;
      text-shadow: 0 12px 34px rgba(0,0,0,.65);
    }
    .sub{
      margin: 0 auto 22px;
      max-width: 680px;
      font-size: 14px;
      line-height: 1.7;
      color: var(--muted);
      font-weight: 800;
    }
    .cta{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border:none;
      cursor:pointer;
      border-radius: 999px;
      padding: 13px 26px;
      background: linear-gradient(180deg, var(--gold), var(--gold2));
      color:#0b0b0b;
      font-weight: 980;
      box-shadow: 0 14px 40px rgba(0,0,0,.55);
      transition: transform .16s ease;
    }
    .cta:hover{ transform: translateY(-1px); }

    /* ===== GATE ===== */
    .gate-wrap{
      width: min(980px, 100%);
      display:none;
    }
    .gate-card{
      border-radius: 34px;
      border: 1px solid rgba(255,255,255,.10);
      background: var(--glass2);
      box-shadow: 0 40px 140px rgba(0,0,0,.78);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      overflow:hidden;
      padding: 16px;
      position:relative;
    }
    .gate-card:before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(1200px 700px at 18% 18%, rgba(242,180,0,.14), transparent 55%),
        radial-gradient(900px 700px at 82% 18%, rgba(255,255,255,.06), transparent 58%),
        linear-gradient(180deg, rgba(0,0,0,.40), rgba(0,0,0,.65));
      pointer-events:none;
      z-index:0;
    }
    .gate-inner{ position:relative; z-index:1; padding: 16px 18px 18px; }

    .gate-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 14px;
    }
    .gate-brand{ display:flex; align-items:center; gap: 12px; min-width:0; }
    .gate-brand img{ height: 32px; filter: drop-shadow(0 10px 18px rgba(0,0,0,.65)); }
    .gate-title strong{ display:block; font-size: 14px; font-weight: 980; }
    .gate-title span{ display:block; margin-top: 4px; font-size: 11px; color: var(--muted); font-weight: 850; }

    .logout{
      border-radius: 999px;
      padding: 10px 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      font-weight: 950;
      cursor:pointer;
      transition: transform .16s ease, background .16s ease, border-color .16s ease;
    }
    .logout:hover{ transform: translateY(-1px); background: rgba(255,255,255,.10); border-color: rgba(242,180,0,.18); }

    .gate-grid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap: 14px;
    }
    .panel{
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.28);
      padding: 16px;
    }
    .price{
      text-align:right;
      white-space:nowrap;
    }
    .price .amt{ font-size: 40px; font-weight: 990; letter-spacing: -0.8px; }
    .price .dur{ font-size: 12px; font-weight: 950; color: rgba(255,255,255,.74); margin-top: 2px; }

    .warn{
      margin-top: 12px;
      border-radius: 16px;
      border: 1px solid rgba(242,180,0,.22);
      background: rgba(242,180,0,.08);
      padding: 10px 12px;
      font-size: 12px;
      font-weight: 950;
      line-height: 1.35;
    }
    .warn small{ display:block; margin-top: 4px; color: rgba(255,255,255,.78); font-weight: 850; }

    .gate-cta{
      margin-top: 14px;
      width:100%;
      border:none;
      cursor:pointer;
      border-radius: 999px;
      padding: 14px 16px;
      background: linear-gradient(180deg, var(--gold), var(--gold2));
      color:#0b0b0b;
      font-weight: 990;
      box-shadow: 0 18px 55px rgba(242,180,0,.18), 0 18px 45px rgba(0,0,0,.55);
    }
    .note{
      margin-top: 10px;
      font-size: 11px;
      color: rgba(255,255,255,.70);
      font-weight: 850;
      line-height: 1.45;
      text-align:center;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      border-radius: 999px;
      padding: 9px 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      font-size: 12px;
      font-weight: 980;
      width: fit-content;
    }
    .dot{ width: 8px; height: 8px; border-radius: 999px; background: rgba(255,255,255,.35); box-shadow: 0 0 0 5px rgba(255,255,255,.06); }
    .badge.pending .dot{ background: rgba(242,180,0,.9); box-shadow: 0 0 0 5px rgba(242,180,0,.10); }
    .badge.active .dot{ background: rgba(88,199,255,.85); box-shadow: 0 0 0 5px rgba(88,199,255,.10); }

    /* ===== APP ===== */
    .app{
      width: min(1120px, 100%);
      display:none;
      flex-direction:column;
      gap: 14px;
    }
    .card{
      border-radius: var(--r1);
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(18,18,18,.62);
      box-shadow: 0 18px 60px rgba(0,0,0,.55);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 18px;
    }

    /* SHOW/HIDE STATES */
    body.loggedout .hero{ display:block; }
    body.gate .gate-wrap{ display:block; }
    body.active .app{ display:flex; }

    @media(max-width: 980px){
      .gate-grid{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body class="loggedout">
  <div class="bg-wrap">
    <video id="bgVideo" autoplay muted loop playsinline preload="auto">
      <source src="montage.mp4" type="video/mp4" />
    </video>
    <div class="vignette"></div>
  </div>

  <header>
    <div class="nav-inner">
      <a class="brand" href="#" aria-label="PrimeX">
        <img src="primex-full-transparent-clean.png" alt="PrimeX Logo" />
      </a>

      <nav id="navCustomer" style="display:none;">
        <button class="active" data-section="home" type="button">Home</button>
        <button data-section="live" type="button">Live Sessions</button>
        <button data-section="sub" type="button">Subscription</button>
        <button data-section="signals" type="button">Group Signals</button>
        <button data-section="business" type="button">Business</button>
        <button id="logoutBtn" type="button">Logout</button>
      </nav>
    </div>
  </header>

  <main>
    <!-- LANDING -->
    <section class="hero">
      <div class="pill">Beyond Limits</div>
      <h1>Welcome to PrimeX</h1>
      <p class="sub">PrimeX | Trading × Mindset × Business</p>
      <button class="cta" id="joinBtn" type="button">Join Now</button>
    </section>

    <!-- GATE -->
    <section class="gate-wrap">
      <div class="gate-card">
        <div class="gate-inner">
          <div class="gate-top">
            <div class="gate-brand">
              <img src="primex-full-transparent-clean.png" alt="PrimeX" />
              <div class="gate-title">
                <strong>PrimeX Access</strong>
                <span id="gateLine">Activate your membership to enter the platform.</span>
              </div>
            </div>
            <button class="logout" id="gateLogout" type="button">Logout</button>
          </div>

          <div class="gate-grid">
            <div class="panel">
              <div style="display:flex; justify-content:space-between; gap:12px; align-items:flex-start;">
                <div>
                  <div style="font-size:16px; font-weight:990;">PrimeX Subscription</div>
                  <div style="margin-top:6px; font-size:12px; color:rgba(255,255,255,.78); font-weight:850;">
                    Full platform access — live sessions + group signals.
                  </div>
                </div>
                <div class="price">
                  <div class="amt">$499</div>
                  <div class="dur">3 Months</div>
                </div>
              </div>

              <div class="warn">
                ⚠️ Send <b>USDT on TRON (TRC20) only</b>.
                <small>Do not send ERC20 / BEP20 — funds may be lost.</small>
              </div>

              <button class="gate-cta" id="unlockBtn" type="button">Unlock Access</button>
              <div class="note" id="gateNote">After submitting proof → status becomes Pending → activation ~24 hours.</div>

              <div class="note" style="opacity:.75;">
                Dev: <b>?dev=1</b> forces gate always • <b>?sub=1</b> forces active • <b>?biz=1</b> unlocks business
              </div>
            </div>

            <div class="panel">
              <div class="badge" id="statusBadge"><span class="dot"></span><span id="statusText">Status: Not active</span></div>
              <div style="margin-top:12px;">
                <div style="font-size:12px; font-weight:990;">Account</div>
                <div style="margin-top:6px; font-size:12px; color:rgba(255,255,255,.74); font-weight:850;" id="acctEmail">—</div>
              </div>

              <div style="margin-top:14px; font-size:12px; color:rgba(255,255,255,.72); font-weight:850; line-height:1.45;">
                Submit payment proof and we verify manually. Once activated, the dashboard opens automatically.
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- APP -->
    <section class="app" id="app">
      <div class="card">
        <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;">
          <div>
            <div style="font-size:16px; font-weight:990;">Dashboard</div>
            <div style="margin-top:6px; font-size:12px; color:rgba(255,255,255,.72); font-weight:850;">
              Clean app mode. Gate is fully hidden.
            </div>
          </div>
          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <div class="badge active"><span class="dot"></span><span>Subscription: Active</span></div>
          </div>
        </div>

        <div style="margin-top:14px; font-size:12px; color:rgba(255,255,255,.72); font-weight:850;">
          (Your real app sections go here — this is just a stable shell.)
        </div>
      </div>
    </section>
  </main>

  <script>
    // ===== Simple stable state machine =====
    // localStorage:
    // px_subStatus: none | pending | active
    // sessionStorage:
    // px_loggedIn: 1/0
    // px_email: string

    const params = new URLSearchParams(location.search);

    const DEV_FORCE_GATE = params.get("dev") === "1";
    const DEV_FORCE_ACTIVE = params.get("sub") === "1";

    let loggedIn = sessionStorage.getItem("px_loggedIn") === "1";
    let email = sessionStorage.getItem("px_email") || "";
    let subStatus = localStorage.getItem("px_subStatus") || "none";

    if (DEV_FORCE_ACTIVE) subStatus = "active";
    if (DEV_FORCE_GATE) subStatus = "none";

    const body = document.body;
    const navCustomer = document.getElementById("navCustomer");
    const acctEmailEl = document.getElementById("acctEmail");
    const statusBadge = document.getElementById("statusBadge");
    const statusText = document.getElementById("statusText");
    const gateLine = document.getElementById("gateLine");
    const gateNote = document.getElementById("gateNote");

    function setStatusUI(){
      statusBadge.classList.remove("pending","active");
      if(subStatus === "pending") statusBadge.classList.add("pending");
      if(subStatus === "active") statusBadge.classList.add("active");
      statusText.textContent = "Status: " + (subStatus === "active" ? "Active" : subStatus === "pending" ? "Pending" : "Not active");

      if(subStatus === "pending"){
        gateLine.textContent = "Verification in progress. You'll enter after activation.";
        gateNote.textContent = "Submitted ✅ Pending verification — activation ~24 hours.";
      } else {
        gateLine.textContent = "Activate your membership to enter the platform.";
        gateNote.textContent = "After submitting proof → status becomes Pending → activation ~24 hours.";
      }
    }

    function applyState(){
      body.classList.remove("loggedout","gate","active");

      acctEmailEl.textContent = email || "—";
      setStatusUI();

      // Logged out: landing only
      if(!loggedIn){
        body.classList.add("loggedout");
        navCustomer.style.display = "none";
        return;
      }

      // Logged in + NOT active: gate only
      if(subStatus !== "active"){
        body.classList.add("gate");
        navCustomer.style.display = "none"; // IMPORTANT: never show nav in gate
        return;
      }

      // Logged in + active: app only
      body.classList.add("active");
      navCustomer.style.display = "flex";
    }

    // Join: just “logs in” for demo
    document.getElementById("joinBtn").addEventListener("click", () => {
      loggedIn = true;
      email = email || "test@primex.com";
      sessionStorage.setItem("px_loggedIn","1");
      sessionStorage.setItem("px_email", email);
      applyState();
    });

    // Gate buttons (demo)
    document.getElementById("unlockBtn").addEventListener("click", () => {
      subStatus = "pending";
      localStorage.setItem("px_subStatus","pending");
      setStatusUI();
      applyState();
      alert("Demo: set to Pending. In real flow, you'd open the TRC20 payment modal here.");
    });

    function logout(){
      sessionStorage.removeItem("px_loggedIn");
      sessionStorage.removeItem("px_email");
      loggedIn = false;
      email = "";
      applyState();
      location.reload();
    }

    document.getElementById("gateLogout").addEventListener("click", logout);
    document.getElementById("logoutBtn").addEventListener("click", logout);

    applyState();
  </script>
</body>
</html>
